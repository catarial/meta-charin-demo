header:
  version: 17

machine: raspberrypi4
distro: poky

target: core-image-full-cmdline

repos:
  meta-custom:
  meta-everest:
    url: https://github.com/EVerest/meta-everest.git
    branch: release/kirkstone/2024.9.0-rc3
  meta-openembedded:
    url: https://git.openembedded.org/meta-openembedded.git
    branch: kirkstone
    layers:
      meta-oe:
      meta-python:
      meta-networking:
  meta-arm:
    url: https://git.yoctoproject.org/meta-arm.git
    branch: kirkstone
    layers:
      meta-arm:
      meta-arm-toolchain:
      meta-arm-bsp:
  meta-raspberrypi:
    url: https://git.yoctoproject.org/meta-raspberrypi.git
    branch: kirkstone
  poky:
    url: https://git.yoctoproject.org/poky.git
    commit: 7e87dc422d972e0dc98372318fcdc63a76347d16
    patches:
      elfutils:
        repo: meta-custom
        path: elfutils-no-werror.patch
    layers:
      meta:
      meta-poky:
      meta-yocto-bsp:

local_conf_header:
  meta-everest: |
    CORE_IMAGE_EXTRA_INSTALL += "everest-core"
    CORE_IMAGE_EXTRA_INSTALL += "mosquitto"
    CORE_IMAGE_EXTRA_INSTALL += "nodejs"
    CORE_IMAGE_EXTRA_INSTALL += "python3"
  systemd: |
    DISTRO_FEATURES:append = " systemd usrmerge"
    DISTRO_FEATURES_BACKFILL_CONSIDERED += "sysvinit"
    VIRTUAL-RUNTIME_init_manager = "systemd"
    VIRTUAL-RUNTIME_initscripts = "systemd-compat-units"
  wifi: |
    DISTRO_FEATURES:append = " wifi"
  password: |
    INHERIT += "extrausers"
    EXTRA_USERS_PARAMS = "usermod -p '\$1\$aS1Ntik4\$q.OegCxDok9DQ1mvtLHvG.' root; \
                          useradd aria; \
                          usermod -p '\$1\$x8be6haF\$uKuamZOYwxUMqnwpfsC2x0' aria; \
                          usermod -a -G sudo aria;"
